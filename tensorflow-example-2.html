<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Tensorflow.js example 2</title>
    <meta name="description" content="Tensorflow.js example 2">
    <meta name="author" content="Meizano">
    <!-- Load the latest version of TensorFlow.js -->
    <!-- <script src="https://unpkg.com/@tensorflow/tfjs"></script> -->
    <!-- <script src="https://unpkg.com/@tensorflow-models/mobilenet"></script> -->
    <script src="js/tfjs/tf.min.js"></script>
    <script src="js/mobilenet/mobilenet.js"></script>
</head>

<body>
    <div id="console"></div>
    <!-- Add an image that we will use to test -->
    <img id="img" crossOrigin src="image/Common_Birdwing-01-220px.JPG" />

    <!-- Load index.js after the content of the page -->
    <script>
        // Disable WEBGL-PACK to circumvent "Failed to link vertex and fragment" shaders error
        tf.ENV.set('WEBGL_PACK', false);

        let net;
        consl = document.querySelector("#console");

        async function app() {
            let loadingText = "Loading mobilnet..";
            console.log(loadingText);
            consl.innerText = loadingText;

            // Load the model.
            net = await mobilenet.load();
            let loadingSuccessText = 'Sucessfully loaded model';
            console.log(loadingSuccessText);
            consl.innerText = loadingSuccessText;

            // Make a prediction through the model on our image.
            const imgEl = document.getElementById('img');
            const result = await net.classify(imgEl);
            console.log(result);

            consl.innerText = "Nama: " + result[0].className;
            consl.innerText += ", Probabilitas:" + result[0].probability;
            consl.innerText += " | ";

        }

        app();
    </script>
</body>

</html>